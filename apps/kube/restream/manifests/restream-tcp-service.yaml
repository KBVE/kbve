apiVersion: v1
kind: Service
metadata:
  name: restreamer-tcp
  namespace: restream
  labels:
    app: restreamer
  annotations:
    # Expose RTMP ports via nginx-ingress TCP configmap
    nginx.ingress.kubernetes.io/tcp-services-configmap: "nginx-ingress/tcp-services"
spec:
  selector:
    app: restreamer
  ports:
  - name: rtmp
    port: 1935
    targetPort: 1935
    protocol: TCP
  - name: rtmps
    port: 1936
    targetPort: 1936
    protocol: TCP
  type: LoadBalancer
---
apiVersion: v1
kind: Service
metadata:
  name: restreamer-udp
  namespace: restream
  labels:
    app: restreamer
spec:
  selector:
    app: restreamer
  ports:
  - name: srt
    port: 6000
    targetPort: 6000
    protocol: UDP
  type: LoadBalancer