controller:
    ingressClass: nginx
    ingressClassResource:
        name: nginx
        enabled: true
        default: true

    replicaCount: 2

    service:
        enabled: true
        type: LoadBalancer
        externalTrafficPolicy: Local

    config:
        enable-real-ip: "true"
        real-ip-header: "X-Forwarded-For"
        real-ip-recursive: "on"

        # Critical for handling large headers/tokens
        proxy-buffer-size: "32k"
        proxy-buffers: "8 32k"
        proxy-busy-buffers-size: "96k"
        large-client-header-buffers: "8 64k"
        client-header-buffer-size: "32k"
        client-body-buffer-size: "32k"
        
        # Increase timeouts
        proxy-connect-timeout: "300"
        proxy-send-timeout: "300"
        proxy-read-timeout: "300"
        client-body-timeout: "300"
        client-header-timeout: "300"
        
        # Enable headers-more module for more_set_headers
        # enable-modsecurity: "false"
        # enable-owasp-modsecurity-crs: "false"
        
        # Global CORS settings as fallback
        enable-cors: "true"
        cors-allow-origin: "*"
        cors-allow-credentials: "true"
        cors-allow-methods: "GET, POST, PUT, DELETE, OPTIONS, PATCH, HEAD"
        cors-allow-headers: "*"
        
        # Important for handling errors with CORS
        # add-headers: "ingress-nginx/custom-headers"
        
        # Increase body size limit globally
        proxy-body-size: "50m"



    metrics:
        enabled: true
        serviceMonitor:
            enabled: false
            namespace: monitoring
            additionalLabels:
                release: prometheus

    admissionWebhooks:
        enabled: true
        certManager:
            enabled: true
            issuerRef:
                name: internal-ca-issuer
                kind: ClusterIssuer
        patch:
            enabled: false

    resources:
        requests:
            cpu: 100m
            memory: 128Mi
        limits:
            cpu: 250m
            memory: 256Mi

    nodeSelector: {}
    affinity: {}
    tolerations: []

defaultBackend:
    enabled: false

tcp:
    6667: 'irc/ergo-irc-service:6667'
    6697: 'irc/ergo-irc-service:6697'