---
import type { Props } from '@astrojs/starlight/props';
import Default from '@astrojs/starlight/components/Footer.astro';
import { DroidProvider } from '@kbve/astro';
import { workerURLs } from '../../lib/workers';
import SocialTooltip from '../tooltip/social/SocialTooltip.astro';

const currentYear = new Date().getFullYear();
---

<DroidProvider client:only="react" workerURLs={workerURLs} />
<Default {...Astro.props}><slot /></Default>

<div class="site-footer not-content">
	<div class="footer-main">
		{/* Brand column */}
		<div class="footer-brand">
			<a href="/" class="brand-link" data-astro-prefetch>
				<img
					src="/images/discord-sh-text.webp"
					alt="Discord.sh"
					class="brand-logo"
				/>
			</a>
			<p class="brand-desc">
				Discover, compare, and list Discord servers.<br />
				The modern topsite for communities.
			</p>
		</div>

		{/* Link columns */}
		<nav class="footer-col">
			<h6 class="footer-title">Product</h6>
			<a href="/servers/">Servers</a>
			<a href="/bot/">Bot</a>
			<a href="/dashboard/">Dashboard</a>
		</nav>

		<nav class="footer-col">
			<h6 class="footer-title">Resources</h6>
			<a href="/guides/getting-started/">Docs</a>
			<a href="https://kbve.com">KBVE.com</a>
			<a href="https://github.com/kbve/kbve">GitHub</a>
		</nav>

		<nav class="footer-col">
			<h6 class="footer-title">Legal</h6>
			<a href="https://kbve.com/legal/tos/">Terms of Use</a>
			<a href="https://kbve.com/legal/privacy/">Privacy Policy</a>
			<a href="https://kbve.com/legal/">Cookie Policy</a>
		</nav>
	</div>

	{/* Bottom bar */}
	<div class="footer-bottom">
		<span>&copy; {currentYear} <a href="/">Discord.sh</a></span>
		<div class="footer-socials">
			<SocialTooltip
				title="GitHub"
				description="Explore our open-source repositories and contribute to the project."
				badge="Open Source"
				direction="top"
				size="sm"
				ringColor="#6e5494">
				<svg
					slot="icon"
					viewBox="0 0 24 24"
					width="20"
					height="20"
					fill="currentColor">
					<path
						d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z">
					</path>
				</svg>
				<Fragment slot="label">GitHub</Fragment>
			</SocialTooltip>

			<SocialTooltip
				title="Discord"
				description="Join our community server to chat, get support, and stay updated."
				badge="Community"
				direction="top"
				size="sm"
				ringColor="#5865F2">
				<svg
					slot="icon"
					viewBox="0 0 24 24"
					width="20"
					height="20"
					fill="currentColor">
					<path
						d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z">
					</path>
				</svg>
				<Fragment slot="label">Discord</Fragment>
			</SocialTooltip>

			<SocialTooltip
				title="X (Twitter)"
				description="Follow us for the latest news, updates, and announcements."
				badge="Social"
				direction="top"
				size="sm"
				ringColor="#000000">
				<svg
					slot="icon"
					viewBox="0 0 24 24"
					width="20"
					height="20"
					fill="currentColor">
					<path
						d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z">
					</path>
				</svg>
				<Fragment slot="label">X</Fragment>
			</SocialTooltip>
		</div>
	</div>
</div>

<style>
	.site-footer {
		margin-top: 2.5rem;
		padding: 2.5rem 1.5rem 0;
		border-top: 1px solid var(--sl-color-hairline, #27272a);
		background-color: var(--sl-color-bg, rgba(0, 0, 0, 0.15));
	}

	/* Main grid: brand + link columns */
	.footer-main {
		display: grid;
		grid-template-columns: 1.5fr repeat(3, 1fr);
		gap: 2.5rem;
		max-width: 72rem;
		margin: 0 auto;
		padding-bottom: 2rem;
	}

	/* Brand */
	.brand-link {
		display: inline-flex;
		text-decoration: none;
	}

	.brand-logo {
		height: 2rem;
		width: auto;
		object-fit: contain;
	}

	.brand-desc {
		margin-top: 0.75rem;
		font-size: 0.8125rem;
		line-height: 1.6;
		color: var(--sl-color-gray-2, #a1a1aa);
	}

	/* Link columns */
	.footer-col {
		display: flex;
		flex-direction: column;
		gap: 0.625rem;
	}

	.footer-title {
		font-size: 0.75rem;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.08em;
		color: var(--sl-color-white, #e2e8f0);
		margin-bottom: 0.25rem;
	}

	.footer-col a {
		font-size: 0.8125rem;
		color: var(--sl-color-gray-2, #a1a1aa);
		text-decoration: none;
		transition: color 150ms ease;
	}

	.footer-col a:hover {
		color: var(--sl-color-accent, #8b5cf6);
	}

	/* Bottom bar */
	.footer-bottom {
		display: flex;
		align-items: center;
		justify-content: space-between;
		max-width: 72rem;
		margin: 0 auto;
		padding: 1.25rem 0;
		border-top: 1px solid var(--sl-color-hairline, #27272a);
	}

	.footer-bottom span {
		font-size: 0.8125rem;
		color: var(--sl-color-gray-3, #71717a);
	}

	.footer-bottom a {
		color: var(--sl-color-gray-2, #a1a1aa);
		text-decoration: none;
		font-weight: 500;
		transition: color 150ms ease;
	}

	.footer-bottom a:hover {
		color: var(--sl-color-accent, #8b5cf6);
	}

	/* Social icons (SocialTooltip) */
	.footer-socials {
		display: flex;
		align-items: center;
		gap: 1.5rem;
	}

	/* Responsive */
	@media (max-width: 768px) {
		.footer-main {
			grid-template-columns: 1fr 1fr;
			gap: 2rem;
		}

		.footer-brand {
			grid-column: 1 / -1;
		}
	}

	@media (max-width: 480px) {
		.footer-main {
			grid-template-columns: 1fr;
			gap: 1.5rem;
		}

		.footer-bottom {
			flex-direction: column;
			gap: 1rem;
			text-align: center;
		}
	}
</style>
