---
import HeroInteractive from './HeroInteractiveDice';
import HeroSVG from './HeroSVG.astro';
---
	<div
		class="absolute -inset-x-1 -inset-y-16 transform opacity-20 overflow-visible pointer-events-none"
		aria-hidden="true">
		<HeroSVG />
	</div>
<section
	class="relative text-white py-6 px-6 sm:px-12"
	aria-label="Hero section: Introduction to KBVE">
	<!-- Background SVG -->

	<div
		class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12 items-center z-10">
		<!-- LEFT COLUMN: Text Content with Background SVG and Glassmorphic Card -->
		<div
			class="relative z-0 p-6 rounded-3xl bg-white/5 backdrop-blur-md shadow-[inset_0_0_0.5px_0_rgba(255,255,255,0.2),0_20px_40px_rgba(0,0,0,0.4)] ring-1 ring-white/10 hover:shadow-[inset_0_0_1px_0_rgba(255,255,255,0.3),0_30px_60px_rgba(0,0,0,0.5)] transition-all duration-300">
			
			<!-- Inner Block -->
		<!-- <div
			class="absolute inset-[14px] rounded-[1.375rem] pointer-events-none z-10
             border border-[rgba(34,211,238,0.1)]
             shadow-[inset_0.5px_0.5px_1.5px_rgba(186,230,253,0.6),inset_-1px_-1px_1px_rgba(21,94,117,0.5),inset_3px_3px_6px_rgba(0,0,0,0.25)]
             translate-z-[30px] transform-style-3d p-3">
		</div> -->
			<!-- Foreground Content -->
			<header
				class="relative space-y-6 text-center md:text-left z-10"
				aria-labelledby="hero-title">
				
				<h1
					id="hero-title"
					class="text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight text-white drop-shadow-[0_2px_2px_rgba(0,0,0,0.4)]">
					Welcome to <span class="text-cyan-400">KBVE!</span>
				</h1>
				<!-- Rotating Tagline -->
				<span
					id="kbve-tagline"
					class="block text-lg sm:text-xl font-semibold text-cyan-300">
					KiloByte Virtual
					<span
						id="kbve-word"
						class="inline-block transition-opacity duration-500 ease-in-out opacity-100">
						Enterprise
					</span>
				</span>

				<script is:inline>
					document.addEventListener('astro:page-load', () => {
						const rotatingWords = [
							'Enterprise',
							'Energy',
							'Entertainment',
							'Engine',
							'Exchange',
							'Exploration',
						];
						const display = document.getElementById('kbve-word');

						if (!display) return;

						let index = 0;
						let isTransitioning = false;

						function rotateWord() {
							if (isTransitioning) return;
							isTransitioning = true;

							display.classList.add('opacity-0');

							setTimeout(() => {
								index = (index + 1) % rotatingWords.length;
								display.textContent = rotatingWords[index];

								void display.offsetWidth;

								display.classList.remove('opacity-0');
								display.classList.add('opacity-100');

								isTransitioning = false;
							}, 400);
						}

						setInterval(rotateWord, 3000);
					});
				</script>
				<p
					class="text-lg sm:text-xl text-zinc-300 max-w-xl mx-auto md:mx-0">
					From cloud-native development to competitive gaming, we're
					here to help you level up! Whether you're containerizing
					apps or climbing ranked, our community's got your back.
				</p>

				<!-- Google CSE Searchbox -->
				<div class="space-y-2 text-zinc-900">
					<script
						is:inline
						src="https://cse.google.com/cse.js?cx=partner-pub-3698214103602019:ab1srxiqkuo"
						data-astro-rerun
						defer>
					</script>
					<div
						class="rounded-xl overflow-hidden ring-1 ring-white/20 bg-white/10 backdrop-blur-sm p-2 transition duration-300 hover:shadow-lg h-[50px]">
						<div class="gcse-searchbox"></div>
					</div>
				</div>
			</header>

			<!-- Optional Background SVG Decoration -->
			<div class="absolute inset-0 z-[-1] opacity-[.7]">
				<svg
					class="absolute -top-12 -left-12 w-[300px] h-[300px] text-cyan-400/20 rotate-[30deg] animate-pulse transform"
					viewBox="0 0 100 100"
					fill="none"
					xmlns="http://www.w3.org/2000/svg">
					<circle
						cx="50"
						cy="50"
						r="45"
						stroke="currentColor"
						stroke-width="2">
					</circle>
					<circle
						cx="50"
						cy="50"
						r="35"
						stroke="currentColor"
						stroke-width="1.5">
					</circle>
				</svg>
			</div>
		</div>

		<!-- RIGHT COLUMN: HeroInteractive -->
		<div class="relative group mb-4">
			<!-- Gradient Border Ring (appears on hover only) -->
			<div
				class="absolute inset-0 rounded-[1.75rem] z-0 pointer-events-none opacity-0 group-hover:opacity-[.5] transition-opacity duration-500
		bg-gradient-to-r from-cyan-500 via-purple-500 to-cyan-600 p-[2px]">
				<div class="w-full h-full rounded-[1.5rem] bg-transparent">
				</div>
			</div>

			<!-- Main Glassmorphic Content -->
			<div
				id="hero-interactive-wrapper"
				class="relative flex justify-center md:justify-end h-[400px] sm:h-[500px] md:h-[600px] p-6 rounded-3xl bg-white/5 backdrop-blur-md overflow-hidden
		shadow-[inset_0_0_0.5px_rgba(255,255,255,0.1),0_20px_40px_rgba(0,0,0,0.4)]
		hover:shadow-[inset_0_0_1px_rgba(255,255,255,0.2),0_30px_60px_rgba(0,0,0,0.5)] transition-all duration-300 z-10">
				<!-- Spinner -->
				<div
					id="hero-spinner"
					class="absolute inset-0 flex items-center justify-center z-10">
					<svg
						class="h-10 w-10 animate-spin text-cyan-400"
						xmlns="http://www.w3.org/2000/svg"
						fill="none"
						viewBox="0 0 24 24"
						role="status"
						aria-label="Loading">
						<circle
							class="opacity-25"
							cx="12"
							cy="12"
							r="10"
							stroke="currentColor"
							stroke-width="4">
						</circle>
						<path
							class="opacity-75"
							fill="currentColor"
							d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z">
						</path>
					</svg>
				</div>

				<!-- Dice / 3D Component -->
				<HeroInteractive client:only="react" />

				<!-- Optional ambient SVG decoration -->
				<div
					class="absolute -top-16 -right-16 w-[250px] h-[250px] text-cyan-400/20 z-0 pointer-events-none">
					<svg viewBox="0 0 100 100" fill="none">
						<circle
							cx="50"
							cy="50"
							r="45"
							stroke="currentColor"
							stroke-width="2">
						</circle>
						<circle
							cx="50"
							cy="50"
							r="35"
							stroke="currentColor"
							stroke-width="1.5">
						</circle>
						<circle
							cx="50"
							cy="50"
							r="25"
							stroke="currentColor"
							stroke-width="1">
						</circle>
					</svg>
				</div>
			</div>
		</div>
	</div>
</section>

<!-- Bottom Gradient Strip -->
<!-- <div
	class="relative opacity-[0.01] bg-gradient-to-b from-zinc-800/50 via-zinc-900/50 to-[#0e0d0d]/50 h-16 w-full"
	aria-hidden="true">
</div> -->

<!-- Google Search Results -->
<div
	class="relative mx-auto bg-gradient-to-b from-[#0e0d0d]/50 to-stone-950/50"
	aria-label="Search Results From Google">
	<!-- Inner Block -->
		<div
			class="absolute inset-[5px] rounded-[1.375rem] pointer-events-none z-10
             border border-[rgba(34,211,238,0.1)]
             shadow-[inset_0.5px_0.5px_1.5px_rgba(186,230,253,0.6),inset_-1px_-1px_1px_rgba(21,94,117,0.5),inset_3px_3px_6px_rgba(0,0,0,0.25)]
             translate-z-[30px] transform-style-3d">
		</div>

	<div class="gcse-searchresults"></div>
	
	<script src="./heroSearch.ts"></script>
</div>
