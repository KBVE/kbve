---
import PanelCloseButton from './PanelCloseButton.astro';
---

<div class="panel-static border-b border-white/10 px-4 py-4 text-neutral-700 dark:text-neutral-300">
  <div class="flex items-center justify-between">
    <h2 class="text-sm font-semibold uppercase tracking-wide text-neutral-800 dark:text-cyan-300">
      User Access
    </h2>
    <PanelCloseButton side="right" />
  </div>

  <div class="mt-6 space-y-4" id="auth-login-register">
    <a
      href="/login"
      data-astro-prefetch
      class="block w-full rounded-md bg-cyan-600 text-white text-center py-2 px-4 text-sm font-semibold hover:bg-cyan-700 transition"
    >
      Login
    </a>

    <a
      href="/register"
      data-astro-prefetch
      class="block w-full rounded-md bg-purple-600 text-white text-center py-2 px-4 text-sm font-semibold hover:bg-purple-700 transition"
    >
      Register
    </a>

    <div class="mt-6 text-xs text-center text-neutral-500 dark:text-neutral-400">
      Need help? <a href="/support" data-astro-prefetch class="underline hover:text-cyan-500">Contact Support</a>
    </div>
  </div>

  <div class="mt-6 space-y-4 hidden" id="member-links-panel">
    <a href="/settings" data-astro-prefetch class="block w-full rounded-md bg-cyan-700 text-white text-center py-2 px-4 text-sm font-semibold hover:bg-cyan-800 transition">Settings</a>
    <a href="/support" data-astro-prefetch class="block w-full rounded-md bg-purple-700 text-white text-center py-2 px-4 text-sm font-semibold hover:bg-purple-800 transition">Support</a>
    <a href="/profile" data-astro-prefetch class="block w-full rounded-md bg-cyan-600 text-white text-center py-2 px-4 text-sm font-semibold hover:bg-cyan-700 transition">Profile</a>
    <a href="/marketplace" data-astro-prefetch class="block w-full rounded-md bg-purple-600 text-white text-center py-2 px-4 text-sm font-semibold hover:bg-purple-700 transition">Marketplace</a>
  </div>
</div>

<script>
(function() {
  function updatePanelForMember() {
    var isMember = null;
    try {
      isMember = localStorage.getItem('isMember');
    } catch (e) {}
    var authGroup = document.getElementById('auth-login-register');
    var memberGroup = document.getElementById('member-links-panel');
    if (!authGroup || !memberGroup) return;
    if (isMember === 'true') {
      authGroup.classList.add('hidden');
      memberGroup.classList.remove('hidden');
    } else {
      authGroup.classList.remove('hidden');
      memberGroup.classList.add('hidden');
    }
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', updatePanelForMember);
  } else {
    updatePanelForMember();
  }
})();
</script>
