---
import Layout from 'src/layouts/core/Layout.astro';

const pageTitle: string = `Page Not Found`;

// Define variables for page content
const title: string = '404';
const subTitle: string = "Oops, this isn't the tool you were looking for!";
const content: string =
	"Don't let this hiccup slow you down. Let's get you back to building your masterpiece.";
const btnTitle: string = 'Go Back';
---
<Layout title={pageTitle}>
    <section class="">
        <div class="py-4">

        </div>
    </section>
    <section class="grid h-svh place-content-center">
        <div class="mx-auto max-w-screen-xl px-4 py-8 lg:px-6 lg:py-16">
            <div class="mx-auto max-w-screen-sm text-center">
				<h1
					class="text-dark mb-4 text-7xl font-extrabold text-cyan-500 dark:text-cyan-400 lg:text-9xl">
					{title}
				</h1>
				<p
					class="mb-4 text-balance text-3xl font-bold tracking-tight text-neutral-700 dark:text-neutral-300 md:text-4xl">
					{subTitle}
				</p>

				<p
					class="mb-4 text-pretty text-lg text-neutral-600 dark:text-neutral-400">
					{content}
				</p>

                <canvas id="404-canvas" width="300" height="300" class="mx-auto my-auto mb-6"></canvas>
                <script is:inline type="module">
                    import { DotLottieWorker } from 'https://cdn.jsdelivr.net/npm/@lottiefiles/dotlottie-web@0.44.0/+esm';
            
                    function initLottie() {
                            const canvas = document.getElementById('404-canvas');
                            if (!canvas || canvas.dataset.lottieInit === 'true') return;

                            canvas.dataset.lottieInit = 'true';

                            new DotLottieWorker({
                                canvas: canvas,
                                src: 'https://kbve.com/assets/lottie/robot.lottie',
                                autoplay: true,
                                loop: true,
                            });
                    }

                        
                    document.addEventListener('astro:page-load', () => {
                        let attempts = 0;
                        const maxAttempts = 20;
                        const delay = 200;

                        const tryInit = () => {
                            const canvas = document.getElementById('404-canvas');
                            if (canvas) {
                                initLottie();
                            } else if (attempts++ < maxAttempts) {
                                requestAnimationFrame(() => {
                                    setTimeout(tryInit, delay);
                                });
                            } else {
                                console.warn('[Lottie] Failed to initialize after max attempts.');
                            }
                        };

                        tryInit();

                    });
                </script>


				<!--Display a button that navigates user back to the previous page-->

			</div>
        </div>
    </section>
</Layout>