---
import { ReactCard } from '@kbve/astropad';
const getApplications = async () => {
  try {
    const response = await fetch('https://kbve.com/api/applications.json');
    const data = await response.json();
    return data.applications || [];
  } catch (error) {
    console.error('Failed to fetch applications:', error);
    return [];
  }
};

const applications = await getApplications();
---

<section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  {applications.map((app: any) => {
    const cleanSlug = app.slug?.includes('index')
      ? app.slug.replace(/index(\.mdx)?$/, '/').replace(/\/\/$/, '/')
      : app.slug;

    return (
      <ReactCard
        text={app.title || 'Untitled'}
        href={cleanSlug}
        img={app.img}
        description={app.description}
        client:load
      />
    );
  })}
</section>
