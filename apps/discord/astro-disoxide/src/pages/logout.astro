---
/** @jsxImportSource astro */

import Layout from 'src/layout/Layout.astro';
import { ReactLogout } from 'src/layout/template/logout/ReactLogout';
---

<Layout title="Logout" description="Logout from DiscordSH">
	<div class="flex flex-col min-h-screen overflow-y-auto">
		<div
			class="flex-1 flex flex-col w-full min-h-full transition-all duration-200 ease-in-out">
			<main class="p-6 flex-1 overflow-visible">
				<div class="max-w-7xl mx-auto w-full">
					<!-- Main logout container -->
					<div class="flex items-center justify-center min-h-[60vh]">
						<div
							class="bg-[#312d4b] p-8 rounded-lg shadow-xl border border-purple-500/20 hover:border-purple-500/40 transition-all duration-300 w-full max-w-md">
							
							<!-- Skeleton loader for initial render -->
							<div data-skeleton="logout" class="skeleton-logout transition-opacity duration-300">
								<div class="text-center space-y-4">
									<div class="flex items-center justify-center w-12 h-12 mx-auto rounded-full bg-purple-500/10 border border-purple-500/20 animate-pulse">
										<div class="w-6 h-6 bg-purple-500/20 rounded"></div>
									</div>
									<div class="space-y-2">
										<div class="h-6 bg-purple-500/10 rounded animate-pulse mx-auto w-32"></div>
										<div class="h-4 bg-purple-500/10 rounded animate-pulse mx-auto w-48"></div>
									</div>
									<div class="flex gap-3 justify-center">
										<div class="h-10 w-24 bg-purple-500/10 rounded animate-pulse"></div>
										<div class="h-10 w-24 bg-purple-500/10 rounded animate-pulse"></div>
									</div>
								</div>
							</div>

							<!-- React component container -->
							<div class="logout-container opacity-0 transition-opacity duration-300">
								<ReactLogout client:load />
							</div>
						</div>
					</div>

					<!-- Additional info section -->
					<div class="mt-8 text-center">
						<p class="text-gray-400 text-sm">
							You will be redirected after logout
						</p>
					</div>
				</div>
			</main>
		</div>
	</div>
</Layout>

<style>
	/* Skeleton styles */
	.skeleton-logout {
		display: block;
	}
	
	.skeleton-logout.fade-out {
		opacity: 0;
		pointer-events: none;
	}

	/* Container styles for smooth transition */
	.logout-container {
		opacity: 0;
	}
	
	.logout-container.hydrated {
		opacity: 1;
	}

	/* Animation for pulse effect */
	@keyframes pulse {
		0%, 100% {
			opacity: 1;
		}
		50% {
			opacity: 0.5;
		}
	}

	.animate-pulse {
		animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
	}
</style>