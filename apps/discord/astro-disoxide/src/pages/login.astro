---
/** @jsxImportSource astro */

import Layout from 'src/layout/Layout.astro';
import { ReactLogin } from 'src/layout/template/login/ReactLogin';
---

<style>
	@keyframes shimmer {
		0% {
			background-position: -200% 0;
		}
		100% {
			background-position: 200% 0;
		}
	}

	.skeleton-loader {
		transition: opacity 0.3s ease-out;
	}

	.skeleton-loader.hide {
		opacity: 0;
		pointer-events: none;
	}
</style>

<Layout title="Login" description="DiscordSH Login">
	<div class="flex flex-col min-h-screen overflow-y-auto">
		<div
			class="flex-1 flex flex-col w-full min-h-full transition-all duration-200 ease-in-out">
			<main class="p-6 flex-1 overflow-visible">
				<div class="max-w-7xl mx-auto w-full">
					<div class="bento-grid-3">
						<div
							class="relative md:col-span-3 md:row-span-3 bg-[#312d4b] p-4 rounded shadow-xl border-purple-500/20 hover:border-purple-500 border-1">
							<!-- Login Skeleton -->
							<div
								class="skeleton-loader max-w-md mx-auto min-h-[600px] p-4"
								data-skeleton="login"
								id="login-skeleton">
								<!-- OAuth Buttons Skeleton -->
								<div class="flex flex-col gap-3 mb-8">
									<div
										class="h-12 bg-gray-700/50 rounded-xl animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%;">
									</div>
									<div
										class="h-12 bg-gray-700/50 rounded-xl animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.3s;">
									</div>
									<div
										class="h-12 bg-gray-700/50 rounded-xl animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.6s;">
									</div>
								</div>

								<!-- Divider Skeleton -->
								<div class="flex items-center my-6">
									<div
										class="flex-1 h-px animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%;">
									</div>
									<div
										class="px-4 w-8 h-4 rounded animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.2s;">
									</div>
									<div
										class="flex-1 h-px animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.4s;">
									</div>
								</div>

								<!-- Form Title Skeleton -->
								<div class="text-center mb-6">
									<div
										class="h-8 rounded w-40 mx-auto mb-2 animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%;">
									</div>
									<div
										class="h-4 rounded w-48 mx-auto animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.3s;">
									</div>
								</div>

								<!-- Form Fields Skeleton -->
								<div class="space-y-5">
									{
										Array.from({ length: 5 }).map(
											(_, i) => (
												<div class="space-y-2">
													<div
														class="h-4 rounded w-24 animate-[shimmer_2s_infinite]"
														style={`background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: ${i * 0.1}s;`}
													/>
													<div
														class="h-12 rounded-xl animate-[shimmer_2s_infinite]"
														style={`background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: ${i * 0.15}s;`}
													/>
												</div>
											)
										)
									}
								</div>

								<!-- Submit Button Skeleton -->
								<div
									class="h-12 rounded-xl mt-6 animate-[shimmer_2s_infinite]"
									style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.5s;">
								</div>

								<!-- Footer Links Skeleton -->
								<div class="flex justify-between mt-4">
									<div
										class="h-4 rounded w-32 animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.7s;">
									</div>
									<div
										class="h-4 rounded w-28 animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.9s;">
									</div>
								</div>
							</div>

							<div class="min-h-[600px]">
								<ReactLogin client:only="react" />
							</div> 
						</div>
					</div>
				</div>
			</main>
		</div>
	</div>
</Layout>
