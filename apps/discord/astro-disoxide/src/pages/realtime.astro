---
/** @jsxImportSource astro */

import Layout from 'src/layout/Layout.astro';
import { ReactRealtime } from 'src/layout/template/realtime/ReactRealtime';
---

<style>
	@keyframes shimmer {
		0% {
			background-position: -200% 0;
		}
		100% {
			background-position: 200% 0;
		}
	}

	.skeleton-loader {
		transition: opacity 0.3s ease-out;
	}

	.skeleton-loader.hide {
		opacity: 0;
		pointer-events: none;
	}
</style>

<Layout title="Realtime Chat" description="DiscordSH Realtime Communication">
	<div class="flex flex-col min-h-screen overflow-y-auto">
		<div
			class="flex-1 flex flex-col w-full min-h-full transition-all duration-200 ease-in-out">
			<main class="p-6 flex-1 overflow-visible">
				<div class="max-w-7xl mx-auto w-full">
					<div class="bento-grid-3">
						<div
							class="relative md:col-span-3 md:row-span-3 bg-[#312d4b] p-6 rounded shadow-xl border-purple-500/20 hover:border-purple-500 border-1">
							<!-- Realtime Skeleton -->
							<div
								class="skeleton-loader max-w-4xl mx-auto min-h-[700px] p-4"
								data-skeleton="realtime"
								id="realtime-skeleton">
								<!-- Header Skeleton -->
								<div class="text-center mb-6">
									<div
										class="h-8 rounded w-64 mx-auto mb-2 animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%;">
									</div>
									<div
										class="h-4 rounded w-48 mx-auto animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.2s;">
									</div>
								</div>

								<!-- Channel Status Skeleton -->
								<div class="text-center mb-6">
									<div
										class="flex items-center justify-center gap-2 mb-2">
										<div
											class="w-2 h-2 rounded-full bg-gray-500 animate-[shimmer_2s_infinite]"
											style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%;">
										</div>
										<div
											class="h-4 rounded w-24 animate-[shimmer_2s_infinite]"
											style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.1s;">
										</div>
									</div>
									<div
										class="h-4 rounded w-32 mx-auto animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.3s;">
									</div>
								</div>

								<!-- Connect Button Skeleton -->
								<div class="max-w-md mx-auto mb-6">
									<div
										class="h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.4s;">
									</div>
								</div>

								<!-- Chat Area Skeleton -->
								<div class="max-w-2xl mx-auto">
									<div
										class="h-64 bg-gray-900/50 border border-gray-700 rounded-lg p-4 mb-4 animate-[shimmer_2s_infinite]"
										style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 0.5s;">
										<!-- Message Skeletons -->
										{
											Array.from({ length: 4 }).map(
												(_, i) => (
													<div class="mb-3 flex items-start gap-3">
														<div
															class="w-8 h-8 rounded-full animate-[shimmer_2s_infinite]"
															style={`background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: ${0.6 + i * 0.1}s;`}
														/>
														<div class="flex-1">
															<div
																class="h-4 rounded w-20 mb-1 animate-[shimmer_2s_infinite]"
																style={`background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: ${0.7 + i * 0.1}s;`}
															/>
															<div
																class="h-3 rounded w-48 animate-[shimmer_2s_infinite]"
																style={`background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: ${0.8 + i * 0.1}s;`}
															/>
														</div>
													</div>
												)
											)
										}
									</div>

									<!-- Message Input Skeleton -->
									<div class="flex gap-2">
										<div
											class="flex-1 h-12 rounded-lg animate-[shimmer_2s_infinite]"
											style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 1.0s;">
										</div>
										<div
											class="w-20 h-12 rounded-lg animate-[shimmer_2s_infinite]"
											style="background: linear-gradient(90deg, #312d4b 0%, #4a4568 50%, #312d4b 100%); background-size: 200% 100%; animation-delay: 1.1s;">
										</div>
									</div>
								</div>
							</div>

							<div class="min-h-[700px]">
								<ReactRealtime client:only="react" />
							</div>
						</div>
					</div>
				</div>
			</main>
		</div>
	</div>
</Layout>
