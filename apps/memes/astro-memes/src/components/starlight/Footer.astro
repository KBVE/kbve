---
import type { Props } from '@astrojs/starlight/props';
import Default from '@astrojs/starlight/components/Footer.astro';
import { DroidProvider } from '@kbve/astro';
import { OverlayShell } from '../overlay/OverlayShell';
import { workerURLs } from '../../lib/workers';

const navLinks = [
	{ href: '/feed', label: 'Feed' },
	{ href: '/profile', label: 'Profile' },
	{ href: '/guides/getting-started/', label: 'Docs' },
];

const communityLinks = [
	{ href: 'https://kbve.com', label: 'KBVE.com' },
	{ href: 'https://github.com/kbve/kbve', label: 'GitHub' },
	{ href: 'https://kbve.com/discord', label: 'Discord' },
];

const legalLinks = [
	{ href: 'https://kbve.com/legal/privacy/', label: 'Privacy Policy' },
	{ href: 'https://kbve.com/legal/tos/', label: 'Terms of Service' },
	{ href: 'https://kbve.com/legal/', label: 'Legal' },
];
---

<DroidProvider client:only="react" workerURLs={workerURLs} />
<OverlayShell client:only="react" />
<Default {...Astro.props}><slot /></Default>

<footer class="mf-footer relative mt-auto">
	<!-- Accent gradient top bar -->
	<div class="mf-accent-bar" aria-hidden="true"></div>

	<div class="max-w-6xl mx-auto px-6 py-12">
		<!-- Main grid -->
		<div class="grid grid-cols-1 md:grid-cols-12 gap-10 md:gap-8">
			<!-- Brand column -->
			<div class="md:col-span-5">
				<a href="/" class="inline-flex items-center gap-3 no-underline group mb-4">
					<div class="mf-logo-box flex items-center justify-center w-10 h-10 rounded-xl">
						<svg
							viewBox="0 0 76 76"
							class="w-6 h-6 mf-logo-icon"
							xmlns="http://www.w3.org/2000/svg"
							aria-hidden="true">
							<path
								fill="currentColor"
								d="M 19.3919,37.5442C 19.6211,31.4744 22.697,25.8757 28.3209,22.1759C 28.3375,22.1822 28.4831,22.1291 28.4166,22.255C 27.9707,22.668 19.9618,32.1286 27.3341,39.5966C 27.3341,39.5966 31.2074,43.3197 34.2103,39.7866C 34.2103,39.7866 37.1747,35.9499 34.173,30.134C 34.173,30.134 33.4135,28.2344 30.6765,27.057L 32.8808,24.6247C 32.8808,24.6247 34.7436,25.424 36.1859,27.5916C 36.1859,27.5916 36.2626,25.3093 34.5143,22.8771L 37.9323,19L 41.3153,22.8411C 41.3153,22.8411 39.7596,25.0452 39.645,27.6276C 39.645,27.6276 40.7072,25.8795 42.9887,24.6247L 45.1531,27.057C 45.1531,27.057 43.0717,27.7423 41.6775,30.1087C 40.4786,32.3015 39.5556,36.9906 41.7314,39.867C 41.7314,39.867 44.1662,43.3197 48.45,39.663C 48.45,39.663 56.3257,32.6062 47.6423,22.4039C 47.6423,22.4039 47.168,21.9846 47.7007,22.2127C 51.5385,25.0066 56.1339,28.6918 56.6082,37.8876C 56.4214,49.0393 48.9535,57 38.0487,57C 27.3715,57 19.0713,48.0899 19.3919,37.5442 Z"
							></path>
						</svg>
					</div>
					<span class="text-xl font-bold tracking-wide mf-brand-text">Meme.sh</span>
				</a>
				<p class="text-sm leading-relaxed max-w-xs mf-tagline">
					Discover, create, and share memes with the community. Powered by KBVE.
				</p>

				<!-- Social row -->
				<div class="flex items-center gap-3 mt-5">
					<a
						href="https://github.com/kbve"
						target="_blank"
						rel="noopener noreferrer"
						class="mf-social-btn flex items-center justify-center w-9 h-9 rounded-lg transition-all duration-200"
						aria-label="GitHub">
						<svg viewBox="0 0 24 24" fill="currentColor" class="w-[18px] h-[18px]">
							<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
						</svg>
					</a>
					<a
						href="https://kbve.com/discord"
						target="_blank"
						rel="noopener noreferrer"
						class="mf-social-btn flex items-center justify-center w-9 h-9 rounded-lg transition-all duration-200"
						aria-label="Discord">
						<svg viewBox="0 0 24 24" fill="currentColor" class="w-[18px] h-[18px]">
							<path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z" />
						</svg>
					</a>
				</div>
			</div>

			<!-- Nav column -->
			<div class="md:col-span-3">
				<h3 class="mf-col-title text-xs font-semibold uppercase tracking-widest mb-4">Explore</h3>
				<ul class="space-y-2.5 list-none p-0 m-0">
					{navLinks.map((link) => (
						<li>
							<a href={link.href} class="mf-nav-link text-sm no-underline transition-colors duration-150">
								{link.label}
							</a>
						</li>
					))}
				</ul>
			</div>

			<!-- Community column -->
			<div class="md:col-span-4">
				<h3 class="mf-col-title text-xs font-semibold uppercase tracking-widest mb-4">Community</h3>
				<ul class="space-y-2.5 list-none p-0 m-0">
					{communityLinks.map((link) => (
						<li>
							<a
								href={link.href}
								target="_blank"
								rel="noopener noreferrer"
								class="mf-nav-link text-sm no-underline transition-colors duration-150">
								{link.label}
							</a>
						</li>
					))}
				</ul>
			</div>
		</div>

		<!-- Bottom bar -->
		<div class="mf-divider mt-10 pt-6">
			<div class="flex flex-col sm:flex-row items-center justify-between gap-4">
				<p class="mf-copy text-xs m-0">
					&copy; {new Date().getFullYear()} KBVE. All rights reserved.
				</p>
				<nav class="flex flex-wrap items-center gap-4" aria-label="Legal">
					{legalLinks.map((link) => (
						<a
							href={link.href}
							target="_blank"
							rel="noopener noreferrer"
							class="mf-legal-link text-xs no-underline transition-colors duration-150">
							{link.label}
						</a>
					))}
				</nav>
			</div>
		</div>
	</div>
</footer>

<style>
	.mf-footer {
		background: var(--sl-color-bg);
	}

	.mf-accent-bar {
		height: 3px;
		background: linear-gradient(
			90deg,
			transparent 0%,
			var(--sl-color-accent-low) 15%,
			var(--sl-color-accent) 35%,
			var(--sl-color-text-accent) 50%,
			var(--sl-color-accent) 65%,
			var(--sl-color-accent-low) 85%,
			transparent 100%
		);
	}

	.mf-logo-box {
		background: var(--sl-color-accent-low);
		border: 1px solid var(--sl-color-accent);
	}

	.mf-logo-icon {
		color: var(--sl-color-accent);
	}

	.mf-brand-text {
		color: var(--sl-color-text);
	}

	.mf-tagline {
		color: var(--sl-color-gray-2);
	}

	.mf-social-btn {
		color: var(--sl-color-gray-3);
		background: var(--sl-color-accent-low);
		border: 1px solid transparent;
	}

	.mf-social-btn:hover {
		color: var(--sl-color-accent);
		border-color: var(--sl-color-accent);
	}

	.mf-col-title {
		color: var(--sl-color-text-accent);
	}

	.mf-nav-link {
		color: var(--sl-color-gray-2);
	}

	.mf-nav-link:hover {
		color: var(--sl-color-accent);
	}

	.mf-divider {
		border-top: 1px solid var(--sl-color-gray-6);
	}

	.mf-copy {
		color: var(--sl-color-gray-4);
	}

	.mf-legal-link {
		color: var(--sl-color-gray-4);
	}

	.mf-legal-link:hover {
		color: var(--sl-color-accent);
	}
</style>
