---
import NeoGlassPanelAnimations from './NeoGlassPanelAnimations.tsx';

const {
	title = 'Tech & Gaming Excellence with KBVE',
	subtitle = 'Flow with serene access and deep-blue level features.',
	description = "Whether you're diving into containerization, mastering Node.js, pushing for Diamond in League, or raiding in WoW, our community is here to support your journey. Share knowledge, form teams, and achieve your goals together.",
	badge = 'Memes',
	buttonText = 'Dive In',
	buttonHref = '#',
	enableAnimations = true,
	animationConfig = {},
} = Astro.props;
---

<style>
	.line-clamp-6 {
		display: -webkit-box;
		-webkit-line-clamp: 6;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}
	
	[data-neoglass-title],
	[data-neoglass-subtitle],
	[data-neoglass-description],
	[data-neoglass-badge] {
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;
	}
	
	/* Ensure fixed layout during animations */
	.neoglass-fixed-layout {
		min-height: 400px;
		display: flex;
		flex-direction: column;
	}
	
	/* Prevent content jumping */
	.neoglass-text-container {
		position: relative;
		overflow: hidden;
	}
</style>

<section class="py-4">
	<div
		data-neoglass-panel
		class="mx-auto max-w-7xl relative flex flex-col md:flex-row rounded-3xl bg-white/5 backdrop-blur-md ring-1 ring-white/10
    shadow-[inset_0_0_0.5px_rgba(255,255,255,0.15),inset_0_1px_0_rgba(255,255,255,0.08),0_20px_40px_rgba(0,0,0,0.4)]
    hover:shadow-[inset_0_0_1px_rgba(255,255,255,0.2),inset_0_2px_1px_rgba(255,255,255,0.1),0_30px_60px_rgba(0,0,0,0.5)]
    hover:ring-[var(--sl-color-accent)]/30 hover:bg-white/8
    transition-all duration-300 ease-out overflow-hidden ring-offset-1 ring-offset-white/5 group cursor-pointer
    hover:scale-[1.01] hover:-translate-y-1 will-change-transform">
		<!-- Background Image Layer for Right Section -->
		<div class="absolute top-0 right-0 w-1/3 h-full hidden md:block rounded-r-3xl pointer-events-none z-0"
		     style="background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1050&q=80'); background-size: cover; background-position: center;"></div>
		<!-- Animated Gradient Overlay - Full Card Coverage -->
		<div data-animated-gradient-overlay class="absolute inset-0 rounded-3xl pointer-events-none z-10 bg-gradient-to-br from-transparent via-[var(--sl-color-accent-high)]/15 to-transparent 
		           opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
		<!-- Inner Block with Enhanced Glow -->
		<div
			data-neoglass-glow
			data-neoglass-magnetic
			class="absolute inset-[14px] rounded-[1.375rem] pointer-events-none z-5
             border border-[var(--sl-color-accent)]/10 group-hover:border-[var(--sl-color-accent)]/30
             shadow-[inset_0.5px_0.5px_1.5px_var(--sl-color-white)/60,inset_-1px_-1px_1px_var(--sl-color-accent-low)/50,inset_3px_3px_6px_rgba(0,0,0,0.25)]
             group-hover:shadow-[inset_0.5px_0.5px_2px_var(--sl-color-white)/80,inset_-1px_-1px_1.5px_var(--sl-color-accent-low)/70,inset_3px_3px_8px_rgba(0,0,0,0.3)]
             transition-all duration-300 ease-out will-change-transform"
			style="filter: drop-shadow(0 0 calc(var(--glow-intensity, 0.4) * 10px) var(--glow-color, var(--sl-color-accent-low)));">
		</div>
		<!-- Left Content Block -->
		<div class="p-8 w-full md:w-2/3 space-y-5 relative z-20 neoglass-fixed-layout">
			<!-- Badge with Animation -->
			<div class="neoglass-text-container">
				<div
					class="inline-flex items-center gap-2 text-xs font-semibold bg-gradient-to-r from-[var(--sl-color-accent)] to-[var(--sl-color-accent-high)] text-[var(--sl-color-accent-low)] px-3 py-1 rounded-full shadow border border-white/30
					group-hover:from-[var(--sl-color-accent-high)] group-hover:to-[var(--sl-color-accent)] group-hover:scale-105 group-hover:shadow-lg group-hover:shadow-[var(--sl-color-accent-high)]/30
					transition-all duration-250 ease-out will-change-transform h-7 min-w-[4rem]">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="w-4 h-4 group-hover:rotate-90 transition-transform duration-400 ease-out will-change-transform flex-shrink-0"
						fill="currentColor"
						viewBox="0 0 24 24">
						<circle cx="12" cy="12" r="10"></circle>
					</svg>
					<span data-neoglass-badge class="transition-all duration-300 whitespace-nowrap overflow-hidden">{badge}</span>
				</div>
			</div>

			<!-- Title with Glow Effect -->
			<div class="h-20 sm:h-24 flex items-start neoglass-text-container">
				<h2 data-neoglass-title class="text-3xl sm:text-4xl font-bold text-[var(--sl-color-white)] group-hover:text-[var(--sl-color-accent-high)] 
				         group-hover:drop-shadow-[0_0_12px_var(--sl-color-accent-high)/60]
				         transition-all duration-300 ease-out will-change-auto leading-tight w-full">
					{title}
				</h2>
			</div>
			
			<div class="h-12 flex items-start neoglass-text-container">
				<p data-neoglass-subtitle class="text-base text-[var(--sl-color-gray-2)] group-hover:text-[var(--sl-color-gray-1)] transition-all duration-300 leading-relaxed w-full">
					{subtitle}
				</p>
			</div>

			<!-- Description Block with Subtle Animation -->
			<div class="mt-6 border-t border-white/10 group-hover:border-[var(--sl-color-accent-high)]/40 pt-6 h-32 overflow-hidden neoglass-text-container">
				<span data-neoglass-description class="block text-base leading-relaxed text-[var(--sl-color-gray-2)] 
				       group-hover:text-[var(--sl-color-gray-1)] transition-all duration-300 line-clamp-6 w-full">
					{description}
				</span>
			</div>

			<!-- Enhanced Glass Button with Frost Effect -->
			<a
				href={buttonHref}
				class="relative inline-block mt-6 group/button">
				<!-- Glass background with heavy frost -->
				<div class="absolute inset-0 bg-[var(--sl-color-white)]/10 backdrop-blur-lg rounded-full
				           border border-[var(--sl-color-accent)]/30 
				           shadow-[inset_0_1px_0_rgba(255,255,255,0.1),0_4px_16px_rgba(0,0,0,0.2)]
				           group-hover/button:bg-[var(--sl-color-white)]/15 
				           group-hover/button:border-[var(--sl-color-accent-high)]/50
				           group-hover/button:shadow-[inset_0_1px_0_rgba(255,255,255,0.2),0_8px_24px_rgba(0,0,0,0.3),0_0_20px_var(--sl-color-accent-high)/20]
				           transition-all duration-300 ease-out will-change-transform"></div>
				
				<!-- Button content -->
				<span class="relative z-10 block bg-gradient-to-br from-[var(--sl-color-accent)] to-[var(--sl-color-accent-high)] 
				           text-[var(--sl-color-white)] font-semibold py-3 px-8 rounded-full text-sm tracking-wide
				           group-hover/button:from-[var(--sl-color-accent-high)] group-hover/button:to-[var(--sl-color-accent)]
				           group-hover/button:-translate-y-0.5 group-hover/button:shadow-lg 
				           active:from-[var(--sl-color-accent)] active:to-[var(--sl-color-accent-high)] active:translate-y-0
				           transition-all duration-200 ease-out transform will-change-transform
				           focus:outline-none focus:ring-2 focus:ring-[var(--sl-color-accent)] focus:ring-offset-2 focus:ring-offset-[var(--sl-color-black)]
				           motion-reduce:transition-none motion-reduce:hover:transform-none">
					{buttonText}
				</span>
				
				<!-- Inner glow effect -->
				<div class="absolute inset-1 rounded-full bg-gradient-to-br from-[var(--sl-color-accent-low)]/20 to-transparent 
				           opacity-0 group-hover/button:opacity-100 transition-opacity duration-300 pointer-events-none"></div>
				
				<!-- Outer glow ring -->
				<div class="absolute -inset-1 rounded-full bg-gradient-to-br from-[var(--sl-color-accent-low)]/30 to-[var(--sl-color-accent-low)]/20 
				           opacity-0 group-hover/button:opacity-100 blur-md transition-all duration-300 pointer-events-none"></div>
			</a>
		</div>

		<div
			data-neoglass-bg
			class="hidden md:block w-1/3 absolute top-0 right-0 h-full border-l border-white/10 
			       group-hover:border-[var(--sl-color-accent-high)]/40 transition-all duration-500 will-change-auto">
			<div data-overlay class="absolute -top-4 -right-4 -bottom-4 left-0 bg-[var(--sl-color-accent-low)]/30 group-hover:bg-[var(--sl-color-accent-low)]/40 transition-all duration-500 z-0 rounded-r-3xl"></div>
			<svg
				data-neoglass-decor
				class="absolute top-4 right-4 w-20 h-20 text-[var(--sl-color-accent)]/20 group-hover:text-[var(--sl-color-accent-high)]/50 z-10
				       group-hover:scale-110 group-hover:rotate-12 transition-all duration-700 ease-out will-change-transform
				       motion-reduce:transition-none motion-reduce:hover:transform-none"
				viewBox="0 0 100 100"
				fill="none">
				<circle
					cx="50"
					cy="50"
					r="45"
					stroke="currentColor"
					stroke-width="2"
					class="animate-pulse group-hover:animate-spin motion-reduce:animate-none"
					style="animation-duration: 4s;">
				</circle>
				<circle
					cx="50"
					cy="50"
					r="35"
					stroke="currentColor"
					stroke-width="1.5"
					class="animate-pulse group-hover:animate-ping motion-reduce:animate-none"
					style="animation-duration: 3s;">
				</circle>
				<circle
					cx="50"
					cy="50"
					r="25"
					stroke="currentColor"
					stroke-width="1"
					opacity="0"
					class="group-hover:opacity-60 transition-opacity duration-500"
					style="filter: blur(1px);">
				</circle>
			</svg>
			
			<div data-neoglass-particles class="absolute -top-4 -right-4 -bottom-4 left-0 z-5 pointer-events-none rounded-r-3xl">
				<div class="absolute top-1/4 left-1/4 w-2 h-2 bg-[var(--sl-color-accent-high)]/40 rounded-full 
				           group-hover:animate-bounce motion-reduce:animate-none" style="animation-delay: 0.5s;"></div>
				<div class="absolute top-1/2 right-1/3 w-1 h-1 bg-[var(--sl-color-accent-high)]/50 rounded-full 
				           group-hover:animate-ping motion-reduce:animate-none" style="animation-delay: 1s;"></div>
				<div class="absolute bottom-1/3 left-1/2 w-1.5 h-1.5 bg-[var(--sl-color-accent-high)]/25 rounded-full 
				           group-hover:animate-pulse motion-reduce:animate-none" style="animation-delay: 1.5s;"></div>
			</div>
		</div>
	</div>

	<!-- React Animation Component -->
	<NeoGlassPanelAnimations client:only="react" /> 
	
</section>
