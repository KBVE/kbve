---
import { ReactLogout } from '@kbve/astropad';
---

<style>
	@keyframes shimmer {
		0% {
			background-position: -200% 0;
		}
		100% {
			background-position: 200% 0;
		}
	}

	/* Custom properties for theming */
	[data-neoglass-panel] {
		--panel-bg: color-mix(in srgb, var(--sl-color-white) 5%, transparent);
		--panel-border: color-mix(in srgb, var(--sl-color-white) 10%, transparent);
		--panel-hover-bg: color-mix(in srgb, var(--sl-color-white) 8%, transparent);
		--panel-hover-ring: color-mix(in srgb, var(--sl-color-accent) 30%, transparent);
		--glow-border: color-mix(in srgb, var(--sl-color-accent) 10%, transparent);
		--glow-hover-border: color-mix(in srgb, var(--sl-color-accent) 30%, transparent);
		--drop-shadow-color: color-mix(in srgb, var(--sl-color-accent) 60%, transparent);
	}

	/* Dark theme adjustments */
	[data-theme="dark"] [data-neoglass-panel] {
		--drop-shadow-color: color-mix(in srgb, var(--sl-color-accent) 80%, rgba(255,255,255,0.1));
	}

	[data-neoglass-panel]:hover {
		background-color: var(--panel-hover-bg);
		border-color: var(--panel-hover-ring);
	}

	[data-neoglass-panel]:hover [data-neoglass-glow] {
		border-color: var(--glow-hover-border);
	}
</style>

<section class="py-4 min-h-[300px]">
	<div
		data-neoglass-panel
		class="logout-container mx-auto max-w-lg relative rounded-3xl backdrop-blur-md ring-1
    shadow-[inset_0_0_0.5px_rgba(255,255,255,0.15),inset_0_1px_0_rgba(255,255,255,0.08),0_20px_40px_rgba(0,0,0,0.4)]
    hover:shadow-[inset_0_0_1px_rgba(255,255,255,0.2),inset_0_2px_1px_rgba(255,255,255,0.1),0_30px_60px_rgba(0,0,0,0.5)]
    transition-all duration-300 ease-out overflow-hidden ring-offset-1 ring-offset-white/5 group
    will-change-transform"
		style="
			background-color: var(--panel-bg);
			border-color: var(--panel-border);
		">
		<!-- Inner Block with Enhanced Glow -->
		<div
			data-neoglass-glow
			class="absolute inset-[14px] rounded-[1.375rem] pointer-events-none z-10 border
             shadow-[inset_0.5px_0.5px_1.5px_rgba(186,230,253,0.6),inset_-1px_-1px_1px_rgba(21,94,117,0.5),inset_3px_3px_6px_rgba(0,0,0,0.25)]
             group-hover:shadow-[inset_0.5px_0.5px_2px_rgba(186,230,253,0.8),inset_-1px_-1px_1.5px_rgba(21,94,117,0.7),inset_3px_3px_8px_rgba(0,0,0,0.3)]
             transition-all duration-300 ease-out will-change-transform"
			style="
				border-color: var(--glow-border);
				filter: drop-shadow(0 0 calc(var(--glow-intensity, 0.4) * 10px) var(--drop-shadow-color));
			">
		</div>
		
		<!-- Logout Content Container -->
		<div class="relative p-8">
			<!-- Skeleton loading state while React component hydrates -->
			<div class="logout-skeleton p-8" data-skeleton="logout">
				<div class="text-center space-y-4">
					<!-- Enhanced skeleton content with shimmer effects -->
					<div class="animate-pulse">
						<!-- Icon area with shimmer -->
						<div class="relative w-12 h-12 mx-auto rounded-full bg-red-500/10 border border-red-500/20 mb-4 overflow-hidden">
							<div class="absolute inset-0 animate-[shimmer_2s_infinite]" 
								 style="background: linear-gradient(90deg, color-mix(in srgb, var(--sl-color-gray-5) 40%, transparent), color-mix(in srgb, var(--sl-color-gray-4) 60%, transparent), color-mix(in srgb, var(--sl-color-gray-5) 40%, transparent)); background-size: 200% 100%;"></div>
							<div class="flex items-center justify-center w-full h-full">
								<div class="w-6 h-6 rounded" 
									 style="background: color-mix(in srgb, var(--sl-color-gray-5) 60%, transparent);"></div>
							</div>
						</div>
						
						<!-- Text area with shimmer -->
						<div class="space-y-2 mb-4">
							<div class="relative w-32 h-5 rounded mx-auto overflow-hidden animate-[shimmer_2s_infinite]"
								 style="background: linear-gradient(90deg, color-mix(in srgb, var(--sl-color-gray-5) 40%, transparent), color-mix(in srgb, var(--sl-color-gray-4) 60%, transparent), color-mix(in srgb, var(--sl-color-gray-5) 40%, transparent)); background-size: 200% 100%;">
							</div>
							<div class="relative w-48 h-4 rounded mx-auto overflow-hidden animate-[shimmer_2s_infinite]"
								 style="background: linear-gradient(90deg, color-mix(in srgb, var(--sl-color-gray-5) 40%, transparent), color-mix(in srgb, var(--sl-color-gray-4) 60%, transparent), color-mix(in srgb, var(--sl-color-gray-5) 40%, transparent)); background-size: 200% 100%; animation-delay: 0.3s;">
							</div>
						</div>
						
						<!-- Enhanced button area -->
						<div class="grid grid-cols-2 gap-3 items-baseline justify-items-center">
							<!-- Cancel button skeleton -->
							<div class="relative min-w-[80px] h-10 rounded-md overflow-hidden animate-[shimmer_2s_infinite]"
								 style="background: linear-gradient(90deg, color-mix(in srgb, var(--sl-color-gray-5) 40%, transparent), color-mix(in srgb, var(--sl-color-gray-4) 60%, transparent), color-mix(in srgb, var(--sl-color-gray-5) 40%, transparent)); background-size: 200% 100%; animation-delay: 0.5s;">
								<div class="flex items-center justify-center gap-2 h-full px-4">
									<div class="w-4 h-4 rounded" 
										 style="background: color-mix(in srgb, var(--sl-color-gray-5) 60%, transparent);"></div>
									<div class="w-10 h-3 rounded"
										 style="background: color-mix(in srgb, var(--sl-color-gray-5) 60%, transparent);"></div>
								</div>
							</div>
							
							<!-- Logout button skeleton -->
							<div class="relative min-w-[80px] h-10 rounded-md overflow-hidden animate-[shimmer_2s_infinite]"
								 style="background: linear-gradient(90deg, color-mix(in srgb, var(--sl-color-red) 40%, transparent), color-mix(in srgb, var(--sl-color-red-high) 60%, transparent), color-mix(in srgb, var(--sl-color-red) 40%, transparent)); background-size: 200% 100%; animation-delay: 0.7s;">
								<div class="flex items-center justify-center gap-2 h-full px-4">
									<div class="w-4 h-4 rounded"
										 style="background: color-mix(in srgb, var(--sl-color-red-high) 60%, transparent);"></div>
									<div class="w-8 h-3 rounded"
										 style="background: color-mix(in srgb, var(--sl-color-red-high) 60%, transparent);"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			
			<!-- React component will replace the skeleton when hydrated -->
			<ReactLogout client:only="react" />
		</div>
	</div>
</section>

<style>
	@keyframes shimmer {
		0% {
			background-position: -200% 0;
		}
		100% {
			background-position: 200% 0;
		}
	}

	/* Custom properties for theming */
	[data-neoglass-panel] {
		--panel-bg: color-mix(in srgb, var(--sl-color-white) 5%, transparent);
		--panel-border: color-mix(in srgb, var(--sl-color-white) 10%, transparent);
		--panel-hover-bg: color-mix(in srgb, var(--sl-color-white) 8%, transparent);
		--panel-hover-ring: color-mix(in srgb, var(--sl-color-accent) 30%, transparent);
		--glow-border: color-mix(in srgb, var(--sl-color-accent) 10%, transparent);
		--glow-hover-border: color-mix(in srgb, var(--sl-color-accent) 30%, transparent);
		--drop-shadow-color: color-mix(in srgb, var(--sl-color-accent) 60%, transparent);
	}

	/* Dark theme adjustments */
	[data-theme="dark"] [data-neoglass-panel] {
		--drop-shadow-color: color-mix(in srgb, var(--sl-color-accent) 80%, rgba(255,255,255,0.1));
	}

	[data-neoglass-panel]:hover {
		background-color: var(--panel-hover-bg);
		border-color: var(--panel-hover-ring);
	}

	[data-neoglass-panel]:hover [data-neoglass-glow] {
		border-color: var(--glow-hover-border);
	}

	/* Logout container specific styles */
	.logout-container {
		position: relative;
		min-height: 320px; /* Prevent layout shift - increased for expanded content */
	}
	
	.logout-skeleton {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		opacity: 1;
		z-index: 30;
		transition: opacity 0.3s ease-in-out;
	}
	
	.logout-skeleton.fade-out {
		opacity: 0;
		pointer-events: none;
	}
	
	/* React component container */
	.logout-container > div > :last-child {
		position: relative;
		z-index: 40;
		opacity: 0;
		transition: opacity 0.3s ease-in-out;
	}
	
	.logout-container.hydrated > div > :last-child {
		opacity: 1;
	}
</style>